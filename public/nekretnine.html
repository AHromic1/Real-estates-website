<!doctype html>
<html lang="hr">
  <head>
    <link rel="stylesheet" type="text/css" href="../css/nekretnineStil.css">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Nekretnine</title>
  </head>
  <body>
    <object data="menu.html" class="meniPos" id="ucitaniMeni"></object>
    <div class="alignment">

    <div id="stan">
      <h2 class="stanPos">Stan</h2>
     
    </div>
    
    
    <div id="kuca">
      <h2>Kuća</h2>
     
    </div>

    <div id="pp">
      <h2>Poslovni prostor</h2>
       
    </div>
    <!--prijava odjava update-->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
    const meni = document.getElementById('ucitaniMeni');
    
    meni.onload = function () {
      const meniSadrzaj = meni.contentDocument;
    
      if (meniSadrzaj) {
        const prijava = meniSadrzaj.getElementById('login');
        const odjava = meniSadrzaj.getElementById('logout');
    
        // Check login status in localStorage
        const isLoggedIn = localStorage.getItem('prijavljen') === 'true';
          console.log(isLoggedIn);
        // Call updateMenuContent with the login status
        meniSadrzaj.defaultView.updateMenuContent(isLoggedIn);
      }
    }
    });
    
    </script>
    
    <script>
      let urlParams = new URLSearchParams(window.location.search);
      let prijavljen = urlParams.get('prijavljen');
      console.log(prijavljen);
       document.addEventListener('DOMContentLoaded', function () {
        const meni = document.getElementById('ucitaniMeni');
        
      meni.onload = function () {
      let urlParams = new URLSearchParams(window.location.search);
      let prijavljen = urlParams.get('prijavljen');
      if(prijavljen){
        const meniSadrzaj = meni.contentDocument;
  
        if (meniSadrzaj) {
        const prijava = meniSadrzaj.getElementById('login');
        const odjava = meniSadrzaj.getElementById('logout');
        
        meniSadrzaj.defaultView.updateMenuContent(true);
        }
  }
      }});
     </script>
     

   <!-- <script src="../poziviAjax.js"></script> -->
   <script src="scripts/poziviAjax.js"></script>
   <script src="scripts/SpisakNekretnina.js"></script>
   <script src="scripts/nekretnine.js"></script>
   

   <script>
    
    window.onload = function() {
      //var nekretnineContainer = document.getElementById('stan');
      //PoziviAjax.impl_getNekretnine()
      PoziviAjax.getNekretnine(function (error, data) {
        if (error) {
          console.error('Error fetching nekretnine:', error);
        } else {
          
          /////////////////////////////////////////////////////////////////////////
           //instanciranje modula
          let nekretnine = SpisakNekretnina();
          nekretnine.init(data, null);  //ne trebaju mi korisnici
          const divStan = document.getElementById("stan");
          const divKuca = document.getElementById("kuca");
          const divPp = document.getElementById("pp");
          spojiNekretnine(divStan, nekretnine, "Stan");
          spojiNekretnine(divKuca, nekretnine, "Kuća");
          spojiNekretnine(divPp, nekretnine, "Poslovni prostor");
          /////////////////////////////////////////////////////////////////////////
          /*for (let i = 0; i < data.length; i++) { //testiranje
            let ime = document.createElement("p");
            ime.textContent = data[i].naziv;
            nekretninecont.appendChild(ime);
          }*/
        }
      });
    };
  </script>
  </body>
</html>
